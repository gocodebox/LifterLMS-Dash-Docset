<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head>
	<meta charset="UTF-8"/>
	<link rel="profile" href="https://gmpg.org/xfn/11"/>
	<link rel="dns-prefetch" href="/s.w.org"/>
	<link rel="dns-prefetch" href="/fonts.googleapis.com"/>
	<link rel="dns-prefetch" href="/fonts.gstatic.com"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>

	<link href="/s29765.pcdn.co/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css"/>
	<link href="/fonts.googleapis.com/css?family=Montserrat:300,300i,600,600i" rel="stylesheet" type="text/css"/>

	<link rel="icon" href="https://s26875.pcdn.co/wp-content/uploads/2019/02/lifterlms-icon-square-150x150.png" sizes="32x32"/>
	<link rel="icon" href="https://s26875.pcdn.co/wp-content/uploads/2019/02/lifterlms-icon-square-300x300.png" sizes="192x192"/>
	<link rel="apple-touch-icon-precomposed" href="https://s26875.pcdn.co/wp-content/uploads/2019/02/lifterlms-icon-square-300x300.png"/>
	<meta name="msapplication-TileImage" content="https://s26875.pcdn.co/wp-content/uploads/2019/02/lifterlms-icon-square-300x300.png"/>
	<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
	<title>LLMS_Student - LifterLMS Developer Hub</title>

<!-- This site is optimized with the Yoast SEO plugin v11.6 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="https://developer.lifterlms.com/reference/classes/llms_student/"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="LLMS_Student - LifterLMS Developer Hub"/>
<meta property="og:description" content="LLMS_Student model class."/>
<meta property="og:url" content="https://developer.lifterlms.com/reference/classes/llms_student/"/>
<meta property="og:site_name" content="LifterLMS Developer Hub"/>
<meta property="article:publisher" content="https://www.facebook.com/lifterlms"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:description" content="LLMS_Student model class."/>
<meta name="twitter:title" content="LLMS_Student - LifterLMS Developer Hub"/>
<meta name="twitter:site" content="@lifterlms"/>
<meta name="twitter:creator" content="@lifterlms"/>
<script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://developer.lifterlms.com/#organization","name":"LifterLMS","url":"https://developer.lifterlms.com/","sameAs":["https://www.facebook.com/lifterlms","https://www.instagram.com/lifterlms/","https://www.youtube.com/user/lifterlms","https://twitter.com/lifterlms"],"logo":{"@type":"ImageObject","@id":"https://developer.lifterlms.com/#logo","url":"https://s29765.pcdn.co/wp-content/uploads/2019/03/lifterlms-logo.png","width":1025,"height":280,"caption":"LifterLMS"},"image":{"@id":"https://developer.lifterlms.com/#logo"}},{"@type":"WebSite","@id":"https://developer.lifterlms.com/#website","url":"https://developer.lifterlms.com/","name":"LifterLMS Developer Hub","publisher":{"@id":"https://developer.lifterlms.com/#organization"},"potentialAction":{"@type":"SearchAction","target":"https://developer.lifterlms.com/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https://developer.lifterlms.com/reference/classes/llms_student/#webpage","url":"https://developer.lifterlms.com/reference/classes/llms_student/","inLanguage":"en-US","name":"LLMS_Student - LifterLMS Developer Hub","isPartOf":{"@id":"https://developer.lifterlms.com/#website"},"datePublished":"2019-03-13T18:37:28+00:00","dateModified":"2019-06-26T15:16:10+00:00"}]}</script>
<!-- / Yoast SEO plugin. -->

<link rel="dns-prefetch" href="/s.w.org"/>
<link rel="alternate" type="application/rss+xml" title="LifterLMS Developer Hub &raquo; Feed" href="https://developer.lifterlms.com/feed/"/>
<link rel="alternate" type="application/rss+xml" title="LifterLMS Developer Hub &raquo; Comments Feed" href="https://developer.lifterlms.com/comments/feed/"/>
<link rel="alternate" type="application/rss+xml" title="LifterLMS Developer Hub &raquo; LLMS_Student Comments Feed" href="https://developer.lifterlms.com/reference/classes/llms_student/feed/"/>
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.7.1 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.7.1';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-40371053-3';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-40371053-3', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script>
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s29765.pcdn.co\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.1"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="https://s29765.pcdn.co/wp-includes/css/dist/block-library/style.min.css?ver=5.1.1" type="text/css" media="all"/>
<link rel="stylesheet" id="wporg-handbook-css-css" href="https://s29765.pcdn.co/wp-content/plugins/handbook/stylesheets/callout-boxes.css?ver=20180111" type="text/css" media="all"/>
<link rel="stylesheet" id="main-css" href="https://s29765.pcdn.co/wp-content/themes/wporg-developer/stylesheets/main.css?ver=20190314" type="text/css" media="all"/>
<link rel="stylesheet" id="dashdocs-css" href="https://s29765.pcdn.co/wp-content/themes/wporg-developer/stylesheets/dashdocs.css?ver=20190314" type="text/css" media="all"/>
<link rel="stylesheet" id="awesomplete-css-css" href="https://s29765.pcdn.co/wp-content/themes/wporg-developer/stylesheets/awesomplete.css?ver=20160114" type="text/css" media="all"/>
<link rel="stylesheet" id="autocomplete-css-css" href="https://s29765.pcdn.co/wp-content/themes/wporg-developer/stylesheets/autocomplete.css?ver=20171220" type="text/css" media="all"/>
<link rel="stylesheet" id="syntaxhighlighter-core-css" href="https://s29765.pcdn.co/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b" type="text/css" media="all"/>
<link rel="stylesheet" id="syntaxhighlighter-theme-default-css" href="https://s29765.pcdn.co/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b" type="text/css" media="all"/>
<script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,exe,js,pdf,ppt,tgz,zip,xls","inbound_paths":"[]","home_url":"https:\/\/developer.lifterlms.com","hash_tracking":"false"};
/* ]]> */
</script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.js?ver=7.7.1"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/plugins/handbook/scripts/handbook.js?ver=20150930"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/chapters.js?ver=20190314"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b"></script>
<link rel="https://api.w.org/" href="https://developer.lifterlms.com/wp-json/"/>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://developer.lifterlms.com/xmlrpc.php?rsd"/>
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s29765.pcdn.co/wp-includes/wlwmanifest.xml"/> 
<meta name="generator" content="WordPress 5.1.1"/>
<link rel="shortlink" href="https://developer.lifterlms.com/?p=7397"/>
<link rel="alternate" type="application/json+oembed" href="https://developer.lifterlms.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.lifterlms.com%2Freference%2Fclasses%2Fllms_student%2F"/>
<link rel="alternate" type="text/xml+oembed" href="https://developer.lifterlms.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.lifterlms.com%2Freference%2Fclasses%2Fllms_student%2F&amp;format=xml"/>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		
	<script type="text/javascript">
		jQuery( '<style>.hide-if-js { display: none; }</style>' ).appendTo( 'head' );
		jQuery( function($) {
			$( 'body' ).addClass('js');
		} );
	</script>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body id="wordpress-org" class="wp-parser-class-template-default single single-wp-parser-class postid-7397">

	<div id="header">

		<nav class="network-menu"><ul id="menu-main" class="menu"><li id="menu-item-7906" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7906"><a href="https://lifterlms.com">LifterLMS</a></li>
<li id="menu-item-7909" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7909"><a href="https://lifterlms.com/docs/">Knowledge Base</a></li>
<li id="menu-item-7910" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7910"><a href="https://academy.lifterlms.com/">Academy</a></li>
<li id="menu-item-7911" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7911"><a href="https://blog.lifterlms.com/">Blog</a></li>
<li id="menu-item-7912" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7912"><a href="https://podcast.lifterlms.com/">Podcast</a></li>
<li id="menu-item-7913" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7913"><a href="https://make.lifterlms.com/">Contributors</a></li>
</ul></nav>
		<div class="wrapper">
			<h1>
				<a href="https://lifterlms.com/">
					<span class="screen-reader-text">LifterLMS</span>
					<img class="header-logo" src="https://s27051.pcdn.co/wp-content/uploads/2019/02/lifterlms_logo.png" alt="LifterLMS"/>
				</a>
			</h1>

		</div>

	</div>



<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
		<h1 class="site-title">
			<a href="https://developer.lifterlms.com/reference/" rel="home">Code Reference</a>
		</h1>

		
		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle dashicons dashicons-arrow-down-alt2" aria-controls="primary-menu" aria-expanded="false" aria-label="Primary Menu"></button>
			<div id="primary-menu" class="menu-container"><ul id="menu-dev-resources" class="menu"><li id="menu-item-7915" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-7915"><a href="https://developer.lifterlms.com/">Home</a></li>
<li id="menu-item-7914" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7914"><a href="https://developer.lifterlms.com/reference/">Code Reference</a></li>
</ul></div>		</nav>
	</div>
</header><!-- #masthead -->

<div id="page" class="hfeed site devhub-wrap">
	<a href="#main" class="screen-reader-text">Skip to content</a>

								<div id="inner-search">
					<div class="search-section section clear hide-if-js">


	
	<form role="search" method="get" class="searchform searchform-filtered" action="https://developer.lifterlms.com/">
		<label for="search-field" class="screen-reader-text">Search for:</label>
		<input type="text" id="search-field" class="search-field" placeholder="Search &hellip;" value="" name="s"/>
		<button class="button button-primary button-search"><i class="dashicons dashicons-search"></i><span class="screen-reader-text">Search plugins</span></button>
	
		<div class="search-post-type">
			<span>Filter by type:</span>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-function"/> Functions</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-hook"/> Hooks</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-class"/> Classes</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-method"/> Methods</label>
					</div>

	
	</form>

</div><!-- /search-guide -->
					<div id="inner-search-icon-container">
						<div id="inner-search-icon">
							<div class="dashicons dashicons-search"><span class="screen-reader-text">Search</span></div>
						</div>
					</div>
				</div>

				<div id="content" class="site-content">

	<div id="content-area" class="wp-parser-class-template-default single single-wp-parser-class postid-7397 code-reference">

		
		<div class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">
			<span class="trail-browse">Browse:</span> 
			<span class="trail-begin"><a href="https://developer.lifterlms.com" title="LifterLMS Developer Hub" rel="home">Home</a></span> <span class="sep">/</span> 
			<span class="trail-inner"><a href="https://developer.lifterlms.com/reference/" title="Code Reference">Code Reference</a></span> <span class="sep">/</span> 
			<span class="trail-inner"><a href="https://developer.lifterlms.com/reference/classes/">Classes</a></span> <span class="sep">/</span> <a class="dashingAutolink" name="autolink-2477"></a><a class="dashAnchor" name="//apple_ref/cpp/Class/LLMS_Student"></a><span class="trail-end">LLMS_Student</span>
		</div>
		<main id="main" class="site-main" role="main">

		
			
<article id="post-7397" class="post-7397 wp-parser-class type-wp-parser-class status-publish hentry wp-parser-source-file-includes_models_model-llms-student-php wp-parser-package-lifterlms-models wp-parser-since-2-2-3 wp-parser-since-3-33-0">

	
	
	<h1>LLMS_Student</h1>

	<section class="summary">
		<p><a href="https://developer.lifterlms.com/reference/classes/llms_student/">LLMS_Student</a> model class.</p>
	</section>


	
	<div class="content-toc"><style> .toc-jump { text-align: right; font-size: 12px; } .page .toc-heading { margin-top: -50px; padding-top: 50px !important; }</style><div class="table-of-contents"><h2>Contents</h2><ul class="items"><li><a href="#description">Description</a>
<ul>
<li><a href="#source">Source</a></li>
<li><a href="#changelog">Changelog</a>
</li></ul></li>
<li><a href="#related">Related</a>
<ul>
<li><a href="#uses">Uses</a>
</li></ul></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#user-contributed-notes">User Contributed Notes</a></li></ul>
</div>

<hr/>
<section class="description">
	<h2 class="toc-heading" id="description" tabindex="-1">Description <a href="#description" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Description</span></a></h2>
	
	</section>

	<hr/>
	<section class="source-content">
		<h3 class="toc-heading" id="source" tabindex="-1">Source <a href="#source" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Source</span></a></h3>
		<p>
			File: <a href="https://developer.lifterlms.com/reference/files/includes/models/model-llms-student.php/">includes/models/model.llms.student.php</a>		</p>

					<div class="source-code-container">
				<pre class="brush: php; toolbar: false; first-line: 20">class LLMS_Student extends LLMS_Abstract_User_Data {

	/**
	 * Retrieve an instance of the LLMS_Instructor model for the current user
	 * @return   obj|false
	 * @since    3.14.0
	 * @version  3.14.0
	 */
	public function instructor() {
		if ( $this-&gt;is_instructor() ) {
			return llms_get_instructor( $this-&gt;get_id() );
		}
		return false;
	}

	/**
	 * Retrieve an instance of the student quiz data model
	 * @return   LLMS_Student_Quizzes
	 * @since    3.9.0
	 * @version  3.9.0
	 */
	public function quizzes() {
		return new LLMS_Student_Quizzes( $this-&gt;get_id() );
	}

	/**
	 * Add the student to a LifterLMS Membership
	 * @param int $membership_id   WP Post ID of the membership
	 * @return  void
	 *
	 * @since  2.2.3
	 */
	private function add_membership_level( $membership_id ) {

		// add the user to the membership level
		$membership_levels = $this-&gt;get_membership_levels();
		array_push( $membership_levels, $membership_id );
		update_user_meta( $this-&gt;get_id(), &#39;_llms_restricted_levels&#39;, $membership_levels );

		// if there&#39;s auto-enroll courses, enroll the user in those courses
		$autoenroll_courses = get_post_meta( $membership_id, &#39;_llms_auto_enroll&#39;, true );
		if ( $autoenroll_courses ) {

			foreach ( $autoenroll_courses as $course_id ) {

				$this-&gt;enroll( $course_id, &#39;membership_&#39; . $membership_id );

			}
		}

	}

	/**
	 * Enroll the student in a course or membership
	 * @param  int     $product_id   WP Post ID of the course or membership
	 * @param  string  $trigger      String describing the reason for enrollment
	 * @return boolean
	 *
	 * @see  llms_enroll_student()  calls this function without having to instantiate the LLMS_Student class first
	 *
	 * @since    2.2.3
	 * @version  3.17.0
	 */
	public function enroll( $product_id, $trigger = &#39;unspecified&#39; ) {

		do_action( &#39;before_llms_user_enrollment&#39;, $this-&gt;get_id(), $product_id );

		// can only be enrolled in the following post types
		$product_type = get_post_type( $product_id );
		if ( ! in_array( $product_type, array( &#39;course&#39;, &#39;llms_membership&#39; ) ) ) {
			return false;
		}

		// check enrollment before enrolling
		// this will prevent duplicate enrollments
		if ( llms_is_user_enrolled( $this-&gt;get_id(), $product_id ) ) {
			return false;
		}

		// if the student has been previously enrolled, simply update don&#39;t run a full enrollment
		if ( $this-&gt;get_enrollment_status( $product_id, false ) ) {
			$insert = $this-&gt;insert_status_postmeta( $product_id, &#39;enrolled&#39;, $trigger );
		} else {
			$insert = $this-&gt;insert_enrollment_postmeta( $product_id, $trigger );
		}

		// add the user postmeta for the enrollment
		if ( ! empty( $insert ) ) {

			// update the cache
			$this-&gt;cache_set( sprintf( &#39;enrollment_status_%d&#39;, $product_id ), &#39;enrolled&#39; );
			$this-&gt;cache_delete( sprintf( &#39;date_enrolled_%d&#39;, $product_id ) );
			$this-&gt;cache_delete( sprintf( &#39;date_updated_%d&#39;, $product_id ) );

			// trigger additional actions based off post type
			switch ( get_post_type( $product_id ) ) {

				case &#39;course&#39;:

					do_action( &#39;llms_user_enrolled_in_course&#39;, $this-&gt;get_id(), $product_id );

				break;

				case &#39;llms_membership&#39;:

					$this-&gt;add_membership_level( $product_id );
					do_action( &#39;llms_user_added_to_membership_level&#39;, $this-&gt;get_id(), $product_id );

				break;

			}

			return true;

		}

		return false;

	}

	/**
	 * Retrieve achievements that a user has earned
	 * @param    string $orderby field to order the returned results by
	 * @param    string $order   ordering method for returned results (ASC or DESC)
	 * @param    string $return  return type
	 *                           	obj =&gt; array of objects from $wpdb-&gt;get_results
	 *                           	achievements =&gt; array of LLMS_User_Achievement instances
	 * @return   array
	 * @since    2.4.0
	 * @version  3.14.0
	 */
	public function get_achievements( $orderby = &#39;updated_date&#39;, $order = &#39;DESC&#39;, $return = &#39;obj&#39; ) {

		$orderby = esc_sql( $orderby );
		$order = esc_sql( $order );

		global $wpdb;

		$query = $wpdb-&gt;get_results( $wpdb-&gt;prepare(
			&#34;SELECT post_id, meta_value AS achievement_id, updated_date AS earned_date FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE user_id = %d and meta_key = &#39;_achievement_earned&#39; ORDER BY $orderby $order&#34;,
			$this-&gt;get_id()
		) );

		if ( &#39;achievements&#39; === $return ) {
			$ret = array();
			foreach ( $query as $obj ) {
				$ret[] = new LLMS_User_Achievement( $obj-&gt;achievement_id );
			}
			return $ret;
		}

		return $query;

	}


	public function get_avatar( $size = 96 ) {
		return &#39;&lt;span class=&#34;llms-student-avatar&#34;&gt;&#39; . get_avatar( $this-&gt;get_id(), $size, null, $this-&gt;get_name() ) . &#39;&lt;/span&gt;&#39;;
	}


	/**
	 * Retrieve the order which enrolled a student in a given course or membership
	 * Retrieves the most recently updated order for the given product
	 *
	 * @param    int        $product_id  WP Post ID of the LifterLMS Product (course, lesson, or membership)
	 * @return   obj|false               Instance of the LLMS_Order or false if none found
	 * @since    3.0.0
	 * @version  3.0.0
	 */
	public function get_enrollment_order( $product_id ) {

		// if a lesson id was passed in, cascade up to the course for order retrieval
		if ( &#39;lesson&#39; === get_post_type( $product_id ) ) {
			$lesson = new LLMS_Lesson( $product_id );
			$product_id = $lesson-&gt;get_parent_course();
		}

		// attempt to locate the order via the enrollment trigger
		$trigger = $this-&gt;get_enrollment_trigger( $product_id );
		if ( strpos( $trigger, &#39;order_&#39; ) !== false ) {

			$id = str_replace( array( &#39;order_&#39;, &#39;wc_&#39; ), &#39;&#39;, $trigger );
			if ( is_numeric( $id ) ) {
				if ( &#39;llms_order&#39; === get_post_type( $id ) ) {
					return new LLMS_Order( $id );
				} else {

					return get_post( $id );
				}
			}
		}

		// couldn&#39;t find via enrollment trigger, do a WP_Query
		$q = new WP_Query( array(
			&#39;order&#39; =&gt; &#39;DESC&#39;,
			&#39;orderby&#39; =&gt; &#39;modified&#39;,
			&#39;meta_query&#39; =&gt; array(
				&#39;relation&#39; =&gt; &#39;AND&#39;,
				array(
					&#39;key&#39; =&gt; &#39;_llms_user_id&#39;,
					&#39;value&#39; =&gt; $this-&gt;get_id(),
				),
				array(
					&#39;key&#39; =&gt; &#39;_llms_product_id&#39;,
					&#39;value&#39; =&gt; $product_id,
				),
			),
			&#39;posts_per_page&#39; =&gt; 1,
			// &#39;post_status&#39; =&gt; $statuses,
			&#39;post_type&#39; =&gt; &#39;llms_order&#39;,
		) );

		if ( $q-&gt;have_posts() ) {
			return new LLMS_Order( $q-&gt;posts[0] );
		}

		// couldn&#39;t find an order, return false
		return false;

	}

	/**
	 * Retrieve certificates that a user has earned
	 * @param    string $orderby field to order the returned results by
	 * @param    string $order   ordering method for returned results (ASC or DESC)
	 * @param    string $return  return type
	 *                           	obj =&gt; array of objects from $wpdb-&gt;get_results
	 *                           	certificates =&gt; array of LLMS_User_Certificate instances
	 * @return   array
	 * @since    2.4.0
	 * @version  3.14.1
	 */
	public function get_certificates( $orderby = &#39;updated_date&#39;, $order = &#39;DESC&#39;, $return = &#39;obj&#39; ) {

		$orderby = esc_sql( $orderby );
		$order = esc_sql( $order );

		global $wpdb;

		$query = $wpdb-&gt;get_results( $wpdb-&gt;prepare(
			&#34;SELECT post_id, meta_value AS certificate_id, updated_date AS earned_date FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE user_id = %d and meta_key = &#39;_certificate_earned&#39; ORDER BY $orderby $order&#34;,
			$this-&gt;get_id()
		) );

		if ( &#39;certificates&#39; === $return ) {
			$ret = array();
			foreach ( $query as $obj ) {
				$ret[] = new LLMS_User_Certificate( $obj-&gt;certificate_id );
			}
			return $ret;
		}

		return $query;

	}

	/**
	 * Retrieve IDs of user&#39;s courses based on supplied criteria
	 * @param    array  $args   see `get_enrollments`
	 * @return   array
	 * @since    3.0.0
	 * @version  3.15.0
	 */
	public function get_courses( $args = array() ) {

		return $this-&gt;get_enrollments( &#39;course&#39;, $args );

	}

	/**
	 * Retrieve IDs of courses a user has completed
	 *
	 * @param  array  $args query arguments
	 *                      @arg int    $limit    number of courses to return
	 *                      @arg string $orderby  table reference and field to order results by
	 *                      @arg string $order    result order (DESC, ASC)
	 *                      @arg int    $skip     number of results to skip for pagination purposes
	 * @return array        &#34;courses&#34; will contain an array of course ids
	 *                      &#34;more&#34; will contain a boolean determining whether or not more courses are available beyond supplied limit/skip criteria
	 * @since   ??
	 * @version 3.24.0
	 */
	public function get_completed_courses( $args = array() ) {

		global $wpdb;

		$args = array_merge( array(
			&#39;limit&#39;   =&gt; 20,
			&#39;orderby&#39; =&gt; &#39;upm.updated_date&#39;,
			&#39;order&#39;   =&gt; &#39;DESC&#39;,
			&#39;skip&#39;    =&gt; 0,
		), $args );

		// add one to the limit to see if there&#39;s pagination
		$args[&#39;limit&#39;]++;

		// the query
		$q = $wpdb-&gt;get_results( $wpdb-&gt;prepare(
			&#34;SELECT upm.post_id AS id
			 FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta AS upm
			 JOIN {$wpdb-&gt;posts} AS p ON p.ID = upm.post_id
			 WHERE p.post_type = &#39;course&#39;
			   AND upm.meta_key = &#39;_is_complete&#39;
			   AND upm.meta_value = &#39;yes&#39;
			   AND upm.user_id = %d
			 ORDER BY {$args[&#39;orderby&#39;]} {$args[&#39;order&#39;]}
			 LIMIT %d, %d;
			&#34;, array(
				$this-&gt;get_id(),
				$args[&#39;skip&#39;],
				$args[&#39;limit&#39;],
			)
		), &#39;OBJECT_K&#39; );

		$ids = array_keys( $q );
		$more = false;

		// if we hit our limit we have too many results, pop the last one
		if ( count( $ids ) === $args[&#39;limit&#39;] ) {
			array_pop( $ids );
			$more = true;
		}

		// reset args to pass back for pagination
		$args[&#39;limit&#39;]--;

		$r = array(
			&#39;limit&#39; =&gt; $args[&#39;limit&#39;],
			&#39;more&#39; =&gt; $more,
			&#39;results&#39; =&gt; $ids,
			&#39;skip&#39; =&gt; $args[&#39;skip&#39;],
		);

		return $r;

	}

	/**
	 * Get the formatted date when a course or lesson was completed by the student
	 * @param    int        $object_id  WP Post ID of a course or lesson
	 * @param    string     $format     date format as accepted by php date()
	 * @return   false|string            will return false if the user is not enrolled
	 * @since    ??
	 * @version  ??
	 */
	public function get_completion_date( $object_id, $format = &#39;F d, Y&#39; ) {

		global $wpdb;

		$q = $wpdb-&gt;get_var( $wpdb-&gt;prepare(
			&#34;SELECT updated_date FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE meta_key = &#39;_is_complete&#39; AND meta_value = &#39;yes&#39; AND user_id = %d AND post_id = %d ORDER BY updated_date DESC LIMIT 1&#34;,
			array( $this-&gt;get_id(), $object_id )
		) );

		return ( $q ) ? date_i18n( $format, strtotime( $q ) ) : false;

	}

	/**
	 * Retrieve IDs of user&#39;s enrollments by post type (and additional criteria)
	 * @param  string $post_type  name of the post type (course|membership)
	 * @param  array  $args query arguments
	 *                      @arg int    $limit    number of courses to return
	 *                      @arg string $orderby  table reference and field to order results by
	 *                      @arg string $order    result order (DESC, ASC)
	 *                      @arg int    $skip     number of results to skip for pagination purposes
	 *                      @arg string $status   filter results by enrollment status, &#34;any&#34;, &#34;enrolled&#34;, &#34;cancelled&#34;, or &#34;expired&#34;
	 * @return array        &#34;results&#34; will contain an array of course ids
	 *                      &#34;more&#34; will contain a boolean determining whether or not more courses are available beyond supplied limit/skip criteria
	 *                      &#34;found&#34; will contain the total possible FOUND_ROWS() for the query
	 * @since    3.0.0
	 * @version  3.15.1
	 */
	public function get_enrollments( $post_type = &#39;course&#39;, $args = array() ) {

		global $wpdb;

		$args = wp_parse_args( $args, array(
			&#39;limit&#39; =&gt; 20,
			&#39;orderby&#39; =&gt; &#39;upm.updated_date&#39;,
			&#39;order&#39; =&gt; &#39;DESC&#39;,
			&#39;skip&#39; =&gt; 0,
			&#39;status&#39; =&gt; &#39;any&#39;, // any, enrolled, cancelled, expired
		) );

		// prefix membership
		if ( &#39;membership&#39; === $post_type ) {
			$post_type = &#39;llms_membership&#39;;
		}

		// sanitize order &amp; orderby
		$args[&#39;orderby&#39;] = preg_replace( &#39;/[^a-zA-Z_.]/&#39;, &#39;&#39;, $args[&#39;orderby&#39;] );
		$args[&#39;order&#39;] = preg_replace( &#39;/[^a-zA-Z_.]/&#39;, &#39;&#39;, $args[&#39;order&#39;] );

		// allow &#34;short&#34; orderby&#39;s to be passed in without a table reference
		switch ( $args[&#39;orderby&#39;] ) {
			case &#39;date&#39;:
				$args[&#39;orderby&#39;] = &#39;upm.updated_date&#39;;
			break;
			case &#39;order&#39;:
				$args[&#39;orderby&#39;] = &#39;p.menu_order&#39;;
			break;
			case &#39;title&#39;:
				$args[&#39;orderby&#39;] = &#39;p.post_title&#39;;
			break;
		}

		// prepare additional status AND clauses
		if ( &#39;any&#39; !== $args[&#39;status&#39;] ) {
			$status = $wpdb-&gt;prepare( &#34;
				AND upm.meta_value = %s
				AND upm.updated_date = (
					SELECT MAX( upm2.updated_date )
					  FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta AS upm2
					 WHERE upm2.meta_key = &#39;_status&#39;
					   AND upm2.user_id = %d
					   AND upm2.post_id = upm.post_id
					)&#34;, $args[&#39;status&#39;], $this-&gt;get_id() );
		} else {
			$status = &#39;&#39;;
		}

		// the query
		$query = $wpdb-&gt;get_results( $wpdb-&gt;prepare(
			&#34;SELECT SQL_CALC_FOUND_ROWS DISTINCT upm.post_id AS id
			 FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta AS upm
			 JOIN {$wpdb-&gt;posts} AS p ON p.ID = upm.post_id
			 WHERE p.post_type = %s
			   AND p.post_status = &#39;publish&#39;
			   AND upm.meta_key = &#39;_status&#39;
			   AND upm.user_id = %d
			   {$status}
			 ORDER BY {$args[&#39;orderby&#39;]} {$args[&#39;order&#39;]}
			 LIMIT %d, %d;
			&#34;, array(
				$post_type,
				$this-&gt;get_id(),
				$args[&#39;skip&#39;],
				$args[&#39;limit&#39;],
			)
		), &#39;OBJECT_K&#39; );

		$found = absint( $wpdb-&gt;get_var( &#39;SELECT FOUND_ROWS()&#39; ) );

		return array(
			&#39;found&#39; =&gt; $found,
			&#39;limit&#39; =&gt; $args[&#39;limit&#39;],
			&#39;more&#39; =&gt; ( $found &gt; ( ( $args[&#39;skip&#39;] / $args[&#39;limit&#39;] + 1 ) * $args[&#39;limit&#39;] ) ),
			&#39;skip&#39; =&gt; $args[&#39;skip&#39;],
			&#39;results&#39; =&gt; array_keys( $query ),
		);

	}

	/**
	 * Get the formatted date when a user initially enrolled in a product or when they were last updated
	 * @param   int    $product_id  WP Post ID of a course or membership
	 * @param   string $date        &#34;enrolled&#34; will get the most recent start date, &#34;updated&#34; will get the most recent status change date
	 * @param   string $format      date format as accepted by php date(), if none supplied uses the WP core &#34;date_format&#34; option
	 * @return  false|string        will return false if the user is not enrolled
	 * @since   3.0.0
	 * @version 3.17.0
	 */
	public function get_enrollment_date( $product_id, $date = &#39;enrolled&#39;, $format = null ) {

		if ( ! $format ) {
			$format = get_option( &#39;date_format&#39;, &#39;M d, Y&#39; );
		}

		$cache_key = sprintf( &#39;date_%1$s_%2$s&#39;, $date, $product_id );
		$res = $this-&gt;cache_get( $cache_key );

		if ( false === $res ) {

			$key = ( &#39;enrolled&#39; === $date ) ? &#39;_start_date&#39; : &#39;_status&#39;;

			global $wpdb;

			// get the oldest recorded Enrollment date
			$res = $wpdb-&gt;get_var( $wpdb-&gt;prepare(
				&#34;SELECT updated_date FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE meta_key = &#39;$key&#39; AND user_id = %d AND post_id = %d ORDER BY updated_date DESC LIMIT 1&#34;,
				array( $this-&gt;get_id(), $product_id )
			) );

			$this-&gt;cache_set( $cache_key, $res );

		}

		return ( $res ) ? date_i18n( $format, strtotime( $res ) ) : false;

	}

	/**
	 * Get the current enrollment status of a student for a particular product
	 *
	 * @param    int    $product_id  WP Post ID of a Course, Lesson, or Membership
	 * @param    bool   $use_cache   If true, returns cached data if available, if false will run a db query
	 * @return   false|string
	 * @since    3.0.0
	 * @version  3.17.0
	 */
	public function get_enrollment_status( $product_id, $use_cache = true ) {

		$status = false;

		$product_type = get_post_type( $product_id );

		// only check the following post types
		if ( ! in_array( $product_type, array( &#39;course&#39;, &#39;lesson&#39;, &#39;llms_membership&#39; ) ) ) {
			return apply_filters( &#39;llms_get_enrollment_status&#39;, $status, $this-&gt;get_id(), $product_id );
		}

		// get course ID if we&#39;re looking at a lesson
		if ( &#39;lesson&#39; === $product_type ) {

			$lesson = new LLMS_Lesson( $product_id );
			$product_id = $lesson-&gt;get_parent_course();

		}

		if ( $use_cache ) {
			$status = $this-&gt;cache_get( sprintf( &#39;enrollment_status_%d&#39;, $product_id ) );
		}

		// status will be:
		//    + false if there was nothing in the cache -- run a query!
		//    + a string if there was a status          -- don&#39;t run query
		//    + null if there&#39;s no status               -- don&#39;t run query
		if ( false === $status ) {

			global $wpdb;

			// get the most recent recorded status
			$status = $wpdb-&gt;get_var( $wpdb-&gt;prepare(
				&#34;SELECT meta_value FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE meta_key = &#39;_status&#39; AND user_id = %d AND post_id = %d ORDER BY updated_date DESC LIMIT 1&#34;,
				array( $this-&gt;get_id(), $product_id )
			) );

			// null will be stored if the student has no status
			$this-&gt;cache_set( sprintf( &#39;enrollment_status_%d&#39;, $product_id ), $status );

		}

		$status = ( $status ) ? $status : false;

		return apply_filters( &#39;llms_get_enrollment_status&#39;, $status, $this-&gt;get_id(), $product_id );

	}

	/**
	 * Get the enrollment trigger for a the student&#39;s enrollment in a course
	 * @param    int           $product_id   WP Post ID of the course or membership
	 * @return   string|false
	 * @since    ??
	 * @version  3.21.0
	 */
	public function get_enrollment_trigger( $product_id ) {

		$trigger = llms_get_user_postmeta( $this-&gt;get_id(), $product_id, &#39;_enrollment_trigger&#39;, true );
		return $trigger ? $trigger : false;

	}

	/**
	 * Get the enrollment trigger id for a the student&#39;s enrollment in a course
	 * @param    int  $product_id  WP Post ID of the course or membership
	 * @return   int|false
	 * @since    3.0.0
	 * @version  3.17.2
	 */
	public function get_enrollment_trigger_id( $product_id ) {

		$trigger = $this-&gt;get_enrollment_trigger( $product_id );
		$id = false;
		if ( $trigger &amp;&amp; false !== strpos( $trigger, &#39;order_&#39; ) ) {
			$trigger_obj = $this-&gt;get_enrollment_order( $product_id );
			if ( $trigger_obj instanceof LLMS_Order ) {
				$id = $trigger_obj-&gt;get( &#39;id&#39; );
			} elseif ( $trigger_obj instanceof WP_Post ) {
				$id = $trigger_obj-&gt;ID;
			}
		} elseif ( $trigger &amp;&amp; false !== strpos( $trigger, &#39;admin_&#39; ) ) {
			$id = absint( str_replace( &#39;admin_&#39;, &#39;&#39;, $trigger ) );
		}
		return $id;

	}

	/**
	 * Retrieve postmeta events related to the student
	 * @param    array      $args  default args, see LLMS_Query_User_Postmeta
	 * @return   array
	 * @since    3.15.0
	 * @version  3.15.0
	 */
	public function get_events( $args = array() ) {

		$query = new LLMS_Query_User_Postmeta( wp_parse_args( $args, array(
			&#39;types&#39; =&gt; &#39;all&#39;,
			&#39;per_page&#39; =&gt; 10,
			&#39;user_id&#39; =&gt; $this-&gt;get_id(),
		) ) );

		return $query-&gt;get_metas();

	}

	/**
	 * Get the students grade for a lesson / course
	 * All grades are based on quizzes assigned to lessons
	 * @param    int     $object_id  WP Post ID of a course or lesson
	 * @param    bool    $use_cache  If true, uses cached results
	 * @return   mixed
	 * @since    ??
	 * @version  3.24.0
	 */
	public function get_grade( $object_id, $use_cache = true ) {
		$grade = LLMS()-&gt;grades()-&gt;get_grade( $object_id, $this, $use_cache );
		if ( is_null( $grade ) ) {
			$grade = _x( &#39;N/A&#39;, &#39;Grade to display when no quizzes taken or available&#39;, &#39;lifterlms&#39; );
		}
		return apply_filters( &#39;llms_student_get_grade&#39;, $grade, $this, $object_id, get_post_type( $object_id ) );
	}

	/**
	 * Retrieve IDs of user&#39;s memberships based on supplied criteria
	 * @param    array  $args   see `get_enrollments`
	 * @return   array
	 * @since    3.15.0
	 * @version  3.15.0
	 */
	public function get_memberships( $args = array() ) {

		return $this-&gt;get_enrollments( &#39;membership&#39;, $args );

	}

	/**
	 * Retrieve a user&#39;s notification subscription preferences for a given type &amp; trigger
	 * @param    string   $type     notification type: email, basic, etc...
	 * @param    string   $trigger  notification trigger: eg purchase_receipt, lesson_complete, etc...
	 * @param    string   $default  value to return if no setting is saved in the db
	 * @return   string             yes or no
	 * @since    3.10.0
	 * @version  3.10.0
	 */
	public function get_notification_subscription( $type, $trigger, $default = &#39;no&#39; ) {

		$prefs = $this-&gt;get( &#39;notification_subscriptions&#39; );
		if ( ! $prefs ) {
			$prefs = array();
		}

		if ( isset( $prefs[ $type ] ) &amp;&amp; isset( $prefs[ $type ][ $trigger ] ) ) {
			return $prefs[ $type ][ $trigger ];
		}

		return $default;

	}

	/**
	 * Retrieve the student&#39;s overall grade
	 * Grade = sum of grades for all courses divided by number of enrolled courses
	 * if a course has no quizzes in it, it cannot be graded and is therefore excluded from the calculation
	 *
	 * cached data is automatically cleared when a student completes a quiz
	 *
	 * @param    boolean      $use_cache   if false, calculates the grade, otherwise utilizes cached data (if available)
	 * @return   float|string              grade as float or &#34;N/A&#34;
	 * @since    3.2.0
	 * @version  3.2.0
	 */
	public function get_overall_grade( $use_cache = true ) {

		$grade = null;

		// attempt to pull from the cache first
		if ( $use_cache ) {

			$grade = $this-&gt;get( $this-&gt;meta_prefix . &#39;overall_grade&#39; );

			if ( is_numeric( $grade ) ) {
				$grade = floatval( $grade );
			}
		}

		// cache disabled or no cached data available
		if ( ! $use_cache || null === $grade || &#39;&#39; === $grade ) {

			$grades = array();

			// get courses
			$courses = $this-&gt;get_courses( array(
				&#39;limit&#39; =&gt; 9999,
			) );

			// loop through courses
			foreach ( $courses[&#39;results&#39;] as $course_id ) {

				// get course grade
				$g = $this-&gt;get_grade( $course_id );

				// if an actual grade (not N/A) is returned
				if ( is_numeric( $g ) ) {
					array_push( $grades, $g );
				}
			}

			// if we have at least one grade
			$count = count( $grades );
			if ( $count ) {

				$grade = round( array_sum( $grades ) / $count, 2 );

			} else {

				$grade = _x( &#39;N/A&#39;, &#39;overall grade when no quizzes&#39;, &#39;lifterlms&#39; );

			}

			// cache the grade
			$this-&gt;set( &#39;overall_grade&#39;, $grade );

		}// End if().

		return apply_filters( &#39;llms_student_get_overall_grade&#39;, $grade, $this );

	}

	/**
	 * Retrieve a student&#39;s overall progress
	 * Overall progress is the total percentage completed based on all courses the student is enrolled in
	 * Cached data is cleared every time the student completes a lesson
	 *
	 * @param    boolean    $use_cache  if false, calculates the progress, otherwise utilizes cached data (if available)
	 * @return   float
	 * @since    3.2.0
	 * @version  3.2.0
	 */
	public function get_overall_progress( $use_cache = true ) {

		$progress = null;

		// attempt to pull from the cache first
		if ( $use_cache ) {

			$progress = $this-&gt;get( $this-&gt;meta_prefix . &#39;overall_progress&#39; );

			if ( is_numeric( $progress ) ) {
				$progress = floatval( $progress );
			}
		}

		// cache disabled or no cached data available
		if ( ! $use_cache || null === $progress || &#39;&#39; === $progress ) {

			$progresses = array();

			// get courses
			$courses = $this-&gt;get_courses( array(
				&#39;limit&#39; =&gt; 9999,
			) );

			// loop through courses
			foreach ( $courses[&#39;results&#39;] as $course_id ) {
				array_push( $progresses, $this-&gt;get_progress( $course_id, &#39;course&#39; ) );
			}

			$count = count( $progresses );
			if ( $count ) {

				$progress = round( array_sum( $progresses ) / $count, 2 );

			} else {

				$progress = 0;

			}

			// cache the grade
			$this-&gt;set( &#39;overall_progress&#39;, $progress );

		}

		return apply_filters( &#39;llms_student_get_overall_progress&#39;, $progress, $this );

	}

	/**
	 * Get the students last completed lesson in a course
	 * @param    int     $course_id    WP_Post ID of the course
	 * @return   int                   WP_Post ID of the lesson or false if no progress has been made
	 * @since    3.0.0
	 * @version  3.0.0
	 */
	public function get_last_completed_lesson( $course_id ) {

		$course = new LLMS_Course( $course_id );
		$lessons = array_reverse( $course-&gt;get_lessons( &#39;ids&#39; ) );

		foreach ( $lessons as $lesson ) {
			if ( $this-&gt;is_complete( $lesson, &#39;lesson&#39; ) ) {
				return $lesson;
			}
		}

		return false;

	}

	/**
	 * Retrieve an array of Membership Levels for a user
	 * @return array
	 * @since   2.2.3
	 * @version 2.2.3
	 */
	public function get_membership_levels() {

		$levels = get_user_meta( $this-&gt;get_id(), &#39;_llms_restricted_levels&#39;, true );

		if ( empty( $levels ) ) {

			$levels = array();

		}

		return $levels;

	}

	/**
	 * Get the full name of a student
	 * @return   string
	 * @since    3.0.4
	 * @version  3.5.1
	 */
	public function get_name() {

		$name = trim( $this-&gt;get( &#39;first_name&#39; ) . &#39; &#39; . $this-&gt;get( &#39;last_name&#39; ) );

		if ( ! $name ) {
			$name = $this-&gt;display_name;
		}

		return apply_filters( &#39;llms_student_get_name&#39;, $name, $this-&gt;get_id(), $this );

	}

	/**
	 * Get the next lesson a student needs to complete in a course
	 * @param    int     $course_id    WP_Post ID of the course
	 * @return   int                   WP_Post ID of the lesson or false if all courses are complete
	 * @since    3.0.1
	 * @version  3.0.1
	 */
	public function get_next_lesson( $course_id ) {

		$course = new LLMS_Course( $course_id );
		$lessons = $course-&gt;get_lessons( &#39;ids&#39; );

		foreach ( $lessons as $lesson ) {
			if ( ! $this-&gt;is_complete( $lesson, &#39;lesson&#39; ) ) {
				return $lesson;
			}
		}

		return false;

	}

	public function get_orders( $params = array() ) {

		$params = wp_parse_args( $params, array(

			&#39;count&#39; =&gt; 25,
			&#39;page&#39; =&gt; 1,
			&#39;statuses&#39; =&gt; array_keys( llms_get_order_statuses() ),

		) );

		extract( $params );

		$q = new WP_Query( array(
			&#39;order&#39; =&gt; &#39;DESC&#39;,
			&#39;orderby&#39; =&gt; &#39;date&#39;,
			&#39;meta_query&#39; =&gt; array(
				array(
					&#39;key&#39; =&gt; &#39;_llms_user_id&#39;,
					&#39;value&#39; =&gt; $this-&gt;get_id(),
				),
			),
			&#39;paged&#39; =&gt; $page,
			&#39;posts_per_page&#39; =&gt; $count,
			&#39;post_status&#39; =&gt; $statuses,
			&#39;post_type&#39; =&gt; &#39;llms_order&#39;,
		) );

		$orders = array();

		if ( $q-&gt;have_posts() ) {

			foreach ( $q-&gt;posts as $post ) {

				$orders[ $post-&gt;ID ] = new LLMS_Order( $post );

			}
		}

		return array(
			&#39;count&#39; =&gt; count( $q-&gt;posts ),
			&#39;page&#39; =&gt; $page,
			&#39;pages&#39; =&gt; $q-&gt;max_num_pages,
			&#39;orders&#39; =&gt; $orders,
		);

	}

	/**
	 * Get students progress through a course or track
	 * @param    int        $object_id  course or track id
	 * @param    string     $type       object type [course|course_track|section]
	 * @param    boolean    $use_cache  if true, will use cached data from the usermeta table (if available)
	 *                                  if false, will bypass cached data and recalculate the progress from scratch
	 * @return   float
	 * @since    3.0.0
	 * @version  3.24.0
	 */
	public function get_progress( $object_id, $type = &#39;course&#39;, $use_cache = true ) {

		$ret = 0;
		$cache_key = sprintf( &#39;%1$s_%2$d_progress&#39;, $type, $object_id );
		$cached = $use_cache ? $this-&gt;get( $cache_key ) : &#39;&#39;;

		if ( &#39;&#39; === $cached ) {

			$total = 0;
			$completed = 0;

			if ( &#39;course&#39; === $type ) {

				$course = new LLMS_Course( $object_id );
				$lessons = $course-&gt;get_lessons( &#39;ids&#39; );
				$total = count( $lessons );
				foreach ( $lessons as $lesson ) {
					if ( $this-&gt;is_complete( $lesson, &#39;lesson&#39; ) ) {
						$completed++;
					}
				}
			} elseif ( &#39;course_track&#39; === $type ) {

				$track = new LLMS_Track( $object_id );
				$courses = $track-&gt;get_courses();
				$total = count( $courses );
				foreach ( $courses as $course ) {
					if ( $this-&gt;is_complete( $course-&gt;ID, &#39;course&#39; ) ) {
						$completed++;
					}
				}
			} elseif ( &#39;section&#39; === $type ) {

				$section = new LLMS_Section( $object_id );
				$lessons = $section-&gt;get_lessons( &#39;ids&#39; );
				$total = count( $lessons );
				foreach ( $lessons as $lesson ) {
					if ( $this-&gt;is_complete( $lesson, &#39;lesson&#39; ) ) {
						$completed++;
					}
				}
			}

			$ret = ( ! $completed || ! $total ) ? 0 : round( 100 / ( $total / $completed ), 2 );
			$this-&gt;set( $cache_key, $ret );

		} else {
			$ret = $cached;
		}// End if().

		/**
		 * @filter llms_student_get_progress
		 * Filters the return of get_progress method
		 * @param    float   $ret        student&#39;s progress
		 * @param    int     $object_id  WP_Post ID of the object
		 * @param    string  $type       object post type [course|course_track|section]
		 * @param    int     $user_id    WP_User ID of the student
		 * @since    unknown
		 * @version  3.24.0
		 */
		return apply_filters( &#39;llms_student_get_progress&#39;, $ret, $object_id, $type, $this-&gt;get_id() );

	}

	/**
	 * Retrieve the Students original registration date in chosen format
	 * @param    string     $format  any date format that can be passed to date()
	 * @return   string
	 * @since    ??
	 * @version  3.14.0
	 */
	public function get_registration_date( $format = &#39;&#39; ) {

		if ( ! $format ) {
			$format = get_option( &#39;date_format&#39; );
		}

		return date_i18n( $format, strtotime( $this-&gt;get( &#39;user_registered&#39; ) ) );

	}

	/**
	 * Determine if the student is active in at least one course or membership
	 * @return   boolean
	 * @since    3.14.0
	 * @version  3.14.0
	 */
	public function is_active() {

		// this is a simpler, faster query, check first
		if ( $this-&gt;get_membership_levels() ) {
			return true;
		}

		// check for at least one enrolled course
		$courses = $this-&gt;get_courses( array(
			&#39;limit&#39;   =&gt; 1,
			&#39;status&#39;  =&gt; &#39;enrolled&#39;,
		) );

		if ( $courses[&#39;results&#39;] ) {
			return true;
		}

		// not active
		return false;

	}

	/**
	 * Determine if the student has completed a course, track, or lesson
	 *
	 * @param    int     $object_id  WP Post ID of a course or lesson or section or the term id of the track
	 * @param    string     $type    Object type (course, lesson, section, or track)
	 * @return   boolean
	 * @since    3.0.0
	 * @version  3.24.0
	 */
	public function is_complete( $object_id, $type = &#39;course&#39; ) {

		// check tracks by progress
		// this is done because tracks can have the same id as another object...
		// @todo tracks should have a different table or format since the post_id col won&#39;t guarantee uniqueness...
		if ( &#39;course_track&#39; === $type ) {

			$ret = ( 100 == $this-&gt;get_progress( $object_id, $type ) );

			// everything else can be checked on the postmeta table
		} else {

			$query = new LLMS_Query_User_Postmeta( array(
				&#39;types&#39; =&gt; &#39;completion&#39;,
				&#39;include_post_children&#39; =&gt; false,
				&#39;user_id&#39; =&gt; $this-&gt;get_id(),
				&#39;post_id&#39; =&gt; $object_id,
				&#39;per_page&#39; =&gt; 1,
			) );

			$ret = $query-&gt;has_results();

		}

		return apply_filters( &#39;llms_is_&#39; . $type . &#39;_complete&#39;, $ret, $object_id, $type, $this );

	}

	/**
	 * Determine if the student is a LifterLMS Instructor (of any kind)
	 * Can be admin, manager, instructor, assistant
	 * @return   boolean
	 * @since    3.14.0
	 * @version  3.14.0
	 */
	public function is_instructor() {
		return $this-&gt;user-&gt;has_cap( &#39;lifterlms_instructor&#39; );
	}

	/**
	 * Add student postmeta data for completion of a lesson, section, course or track
	 * @param  int        $object_id    WP Post ID of the lesson, section, course or track
	 * @param  string     $trigger      String describing the reason for mark completion
	 * @return boolean
	 * @since    3.3.1
	 * @version  3.21.0
	 */
	private function insert_completion_postmeta( $object_id, $trigger = &#39;unspecified&#39; ) {

		// add info to the user postmeta table
		$user_metadatas = array(
			&#39;_is_complete&#39;        =&gt; &#39;yes&#39;,
			&#39;_completion_trigger&#39; =&gt; $trigger,
		);

		$update = llms_bulk_update_user_postmeta( $this-&gt;get_id(), $object_id, $user_metadatas, false );

		// returns an array with errored keys or true on success
		return is_array( $update ) ? false : true;

	}

	/**
	 * Add student postmeta data for incompletion of a lesson, section, course or track
	 * An &#34;_is_complete&#34; value of &#34;no&#34; is inserted into postmeta
	 * @param    int        $object_id    WP Post ID of the lesson, section, course or track
	 * @param    string     $trigger      String describing the reason for mark incompletion
	 * @return   boolean
	 * @since    3.5.0
	 * @version  3.24.0
	 */
	private function insert_incompletion_postmeta( $object_id, $trigger = &#39;unspecified&#39; ) {

		global $wpdb;

		// add &#39;_is_complete&#39; to the user postmeta table for object
		$user_metadatas = array(
			&#39;_is_complete&#39;        =&gt; &#39;no&#39;,
			&#39;_completion_trigger&#39; =&gt; $trigger,
		);

		foreach ( $user_metadatas as $key =&gt; $value ) {

			// It&#39;s too difficult to keep track of multiple postmetas for each lesson incomplete
			// Instead, I&#39;m just replacing the old &#39;_is_complete&#39; value with &#39;no&#39;
			//
			// lessons that have never been complete will not have an &#39;_is_complete&#39; record,
			// lessons that were completed will have an &#39;_is_complete&#39; record of &#39;yes&#39;,
			// lessons that have been completed once but were marked incomplete will have an &#39;_is_complete&#39; record of &#39;no&#39;
			$update = $wpdb-&gt;update( $wpdb-&gt;prefix . &#39;lifterlms_user_postmeta&#39;,
				array(
					&#39;user_id&#39;      =&gt; $this-&gt;get_id(),
					&#39;post_id&#39;      =&gt; $object_id,
					&#39;meta_key&#39;     =&gt; $key,
					&#39;meta_value&#39;   =&gt; $value,
					&#39;updated_date&#39; =&gt; current_time( &#39;mysql&#39; ),
				),
				array(
					&#39;user_id&#39;	   =&gt; $this-&gt;get_id(),
					&#39;post_id&#39;      =&gt; $object_id,
					&#39;meta_key&#39;     =&gt; $key,
				),
				array( &#39;%d&#39;, &#39;%d&#39;, &#39;%s&#39;, &#39;%s&#39;, &#39;%s&#39; )
			);

			if ( false === $update ) {

				return false;

			}
		}

		return true;

	}

	/**
	 * Add student postmeta data for enrollment into a course or membership
	 * @param    int        $product_id   WP Post ID of the course or membership
	 * @param    string     $trigger      String describing the reason for enrollment
	 * @return   boolean
	 * @since    2.2.3
	 * @version  3.21.0
	 */
	private function insert_enrollment_postmeta( $product_id, $trigger = &#39;unspecified&#39; ) {

		// add info to the user postmeta table
		$user_metadatas = array(
			&#39;_enrollment_trigger&#39; =&gt; $trigger,
			&#39;_start_date&#39;         =&gt; &#39;yes&#39;,
			&#39;_status&#39;             =&gt; &#39;enrolled&#39;,
		);

		$update = llms_bulk_update_user_postmeta( $this-&gt;get_id(), $product_id, $user_metadatas, false );

		// returns an array with errored keys or true on success
		return is_array( $update ) ? false : true;

	}

	/**
	 * Remove student enrollment postmeta for a given product.
	 *
	 * @since 3.33.0
	 *
	 * @param int    $product_id WP Post ID of the course or membership.
	 * @param string $trigger    Optional. String the reason for enrollment. Default `null`
	 * @return boolean Whether or not the enrollment records have been succesfully removed.
	 */
	private function delete_enrollment_postmeta( $product_id, $trigger = null ) {

		// delete info from the user postmeta table
		$user_metadatas = array(
			&#39;_enrollment_trigger&#39; =&gt; $trigger,
			&#39;_start_date&#39;         =&gt; null,
			&#39;_status&#39;             =&gt; null,
		);

		$delete = llms_bulk_delete_user_postmeta( $this-&gt;get_id(), $product_id, $user_metadatas );

		return is_array( $delete ) ? false : true;
	}

	/**
	 * Add a new status record to the user postmeta table for a specific product
	 * @param    int    $product_id   WP Post ID of the course or membership
	 * @param    string $status       string describing the new status
	 * @param    string     $trigger  String describing the reason for enrollment (optional)
	 * @return   boolean
	 * @since    3.0.0
	 * @version  3.21.0
	 */
	private function insert_status_postmeta( $product_id, $status = &#39;&#39;, $trigger = null ) {

		$update = llms_update_user_postmeta( $this-&gt;get_id(), $product_id, &#39;_status&#39;, $status, false );

		if ( $update &amp;&amp; $trigger ) {
			$update = llms_update_user_postmeta( $this-&gt;get_id(), $product_id, &#39;_enrollment_trigger&#39;, $trigger, false );
		}

		return $update;

	}

	/**
	 * Determine if a student is enrolled in a Course or Membership.
	 *
	 * @see     llms_is_user_enrolled()
	 *
	 * @param   int|array  $product_id  WP Post ID of a Course, Lesson, or Membership or array of multiple IDs.
	 * @param   string     $relation    Comparator for enrollment check.
	 *                                 		All = user must be enrolled in all $product_ids.
	 *                                 		Any = user must be enrolled in at least one of the $product_ids.
	 * @param   bool       $use_cache  If true, returns cached data if available, if false will run a db query.
	 *
	 * @return  boolean
	 *
	 * @since   3.0.0
	 * @version 3.25.0
	 */
	public function is_enrolled( $product_ids = null, $relation = &#39;all&#39;, $use_cache = true ) {

		// Assume enrollment unless we find otherwise.
		$ret = true;

		// Allow a single product ID to be submitted (backwards compat)
		$product_ids = ! is_array( $product_ids ) ? array( $product_ids ) : $product_ids;

		foreach ( $product_ids as $id ) {

			$enrolled = ( &#39;enrolled&#39; === strtolower( $this-&gt;get_enrollment_status( $id, $use_cache ) ) );

			// If use must be enrolled in all products and one is not enrolled: quit the loop &amp; return false.
			if ( &#39;all&#39; === $relation &amp;&amp; ! $enrolled ) {
				$ret = false;
				break;

				// If user must be enrolled in any
			} elseif ( &#39;any&#39; === $relation ) {

				// If we find an enrollment: return true and quit the loop.
				if ( $enrolled ) {
					$ret = true;
					break;

					// If not switch return to false but keep looking.
				} else {
					$ret = false;
				}
			}
		}

		return apply_filters( &#39;llms_is_user_enrolled&#39;, $ret, $this, $product_ids, $relation, $use_cache );

	}

	/**
	 * Mark a lesson, section, course, or track complete for the given user
	 * @param  int     $object_id    WP Post ID of the lesson, section, course, or track
	 * @param  string  $object_type  object type [lesson|section|course|track]
	 * @param  string  $trigger      String describing the reason for marking complete
	 * @return boolean
	 *
	 * @see    llms_mark_complete() calls this function without having to instantiate the LLMS_Student class first
	 *
	 * @since    3.3.1
	 * @version  3.17.1
	 */
	public function mark_complete( $object_id, $object_type, $trigger = &#39;unspecified&#39; ) {

		// short circuit if it&#39;s already completed
		if ( $this-&gt;is_complete( $object_id, $object_type ) ) {
			return true;
		}

		return $this-&gt;update_completion_status( &#39;complete&#39;, $object_id, $object_type, $trigger );

	}

	/**
	 * Mark a lesson, section, course, or track incomplete for the given user
	 * Gives an &#34;_is_complete&#34; value of &#34;no&#34; for the given object
	 * @param  int     $object_id    WP Post ID of the lesson, section, course, or track
	 * @param  string  $object_type  object type [lesson|section|course|track]
	 * @param  string  $trigger      String describing the reason for marking incomplete
	 * @return boolean
	 *
	 * @see    llms_mark_incomplete() calls this function without having to instantiate the LLMS_Student class first
	 *
	 * @since    3.5.0
	 * @version  3.17.0
	 */
	public function mark_incomplete( $object_id, $object_type, $trigger = &#39;unspecified&#39; ) {

		return $this-&gt;update_completion_status( &#39;incomplete&#39;, $object_id, $object_type, $trigger );

	}
	/**
	 * Remove a student from a membership level
	 * @param    int        $membership_id  WP Post ID of the membership
	 * @param    string     $status         status to update the removal to
	 * @return   void
	 * @since    2.7
	 * @version  3.7.5
	 */
	private function remove_membership_level( $membership_id, $status = &#39;expired&#39; ) {

		// remove the user from the membership level
		$membership_levels = $this-&gt;get_membership_levels();
		$key = array_search( $membership_id, $membership_levels );
		if ( false !== $key ) {
			unset( $membership_levels[ $key ] );
		}
		update_user_meta( $this-&gt;get_id(), &#39;_llms_restricted_levels&#39;, $membership_levels );

		global $wpdb;
		// locate all enrollments triggered by this membership level
		$q = $wpdb-&gt;get_results( $wpdb-&gt;prepare(
			&#34;SELECT post_id FROM {$wpdb-&gt;prefix}lifterlms_user_postmeta WHERE user_id = %d AND meta_key = &#39;_enrollment_trigger&#39; AND meta_value = %s&#34;,
			array( $this-&gt;get_id(), &#39;membership_&#39; . $membership_id )
		), &#39;OBJECT_K&#39; );

		$courses = array_keys( $q );

		if ( $courses ) {

			// loop through all the courses and update the enrollment status
			foreach ( $courses  as $course_id ) {
				$this-&gt;unenroll( $course_id, &#39;membership_&#39; . $membership_id, $status );
			}
		}

	}

	/**
	 * Remove a student from a LifterLMS course or membership
	 *
	 * @param  int    $product_id WordPress Post ID of the course or membership
	 * @param  string $trigger    only remove the student if the original enrollment trigger matches the submitted value
	 *                            &#34;any&#34; will remove regardless of enrollment trigger
	 * @param  string $new_status the value to update the new status with after removal is complete
	 * @return boolean
	 *
	 * @see  llms_unenroll_student()  calls this function without having to instantiate the LLMS_Student class first
	 *
	 * @since    3.0.0
	 * @version  3.26.0
	 */
	public function unenroll( $product_id, $trigger = &#39;any&#39;, $new_status = &#39;expired&#39; ) {

		// can only unenroll those are a currently enrolled
		if ( ! $this-&gt;is_enrolled( $product_id, &#39;all&#39;, false ) ) {
			return false;
		}

		// assume we can&#39;t unenroll
		$update = false;

		// if trigger is &#34;any&#34; we&#39;ll just unenroll regardless of the trigger
		if ( &#39;any&#39; === $trigger ) {

			$update = true;

		} // End if().
		else {

			$enrollment_trigger = $this-&gt;get_enrollment_trigger( $product_id );

			// no enrollment trigger exists b/c pre 3.0.0 enrollment, unenroll the user
			if ( ! $enrollment_trigger ) {

				$update = apply_filters( &#39;lifterlms_legacy_unenrollment_action&#39;, true );

			} // End if().
			elseif ( $enrollment_trigger == $trigger ) {

				$update = true;

			}
		}

		// update if we can
		if ( $update ) {

			// update enrollment for the product
			if ( $this-&gt;insert_status_postmeta( $product_id, $new_status ) ) {

				// update the cache
				$this-&gt;cache_set( sprintf( &#39;enrollment_status_%d&#39;, $product_id ), $new_status );
				$this-&gt;cache_delete( sprintf( &#39;date_enrolled_%d&#39;, $product_id ) );
				$this-&gt;cache_delete( sprintf( &#39;date_updated_%d&#39;, $product_id ) );

				// trigger actions based on product type
				switch ( get_post_type( $product_id ) ) {

					case &#39;course&#39;:
						do_action( &#39;llms_user_removed_from_course&#39;, $this-&gt;get_id(), $product_id );
					break;

					case &#39;llms_membership&#39;:
						// also physically remove from the membership level &amp; perform unenrollment
						// on related products
						$this-&gt;remove_membership_level( $product_id, $new_status );
						do_action( &#39;llms_user_removed_from_membership_level&#39;, $this-&gt;get_id(), $product_id );
					break;

				}

				return true;

			}
		}

		// return false if we didn&#39;t update
		return false;

	}

	/**
	 * Delete a student enrollment.
	 *
	 * @since 3.33.0
	 *
	 * @see llms_delete_student_enrollment() calls this function without having to instantiate the LLMS_Student class first.
	 *
	 * @param int    $product_id WP Post ID of the course or membership.
	 * @param string $trigger    Optional. Only delete the student&#39;s enrollment if the original enrollment trigger matches the submitted value
	 *                           &#34;any&#34; will remove regardless of enrollment trigger. Default &#34;any&#34;.
	 * @return boolean Whether or not the enrollment records have been succesfully removed.
	 */
	public function delete_enrollment( $product_id, $trigger = &#39;any&#39; ) {

		// assume we can&#39;t delete the enrollment
		$delete = false;

		// if trigger is &#34;any&#34; we&#39;ll just delete the enrollment regardless of the trigger.
		if ( &#39;any&#39; === $trigger ) {

			$delete = true;

		} // End if().
		else {

			$enrollment_trigger = $this-&gt;get_enrollment_trigger( $product_id );

			// no enrollment trigger exists b/c pre 3.0.0 enrollment, delete the user&#39;s enrollment.
			if ( ! $enrollment_trigger ) {

				$delete = apply_filters( &#39;lifterlms_legacy_delete_enrollment_action&#39;, true );

			} // End if().
			elseif ( $enrollment_trigger === $trigger ) {

				$delete = true;

			}
		}

		// delete if we can
		if ( $delete ) {

			// delete enrollment for the product
			if ( $this-&gt;delete_enrollment_postmeta( $product_id ) ) {

				// clean the cache
				$this-&gt;cache_delete( sprintf( &#39;enrollment_status_%d&#39;, $product_id ) );
				$this-&gt;cache_delete( sprintf( &#39;date_enrolled_%d&#39;, $product_id ) );
				$this-&gt;cache_delete( sprintf( &#39;date_updated_%d&#39;, $product_id ) );

				// trigger action
				do_action( &#39;llms_user_enrollment_deleted&#39;, $this-&gt;get_id(), $product_id );

				return true;

			}
		}

		// return false if we didn&#39;t remove anything
		return false;

	}

	/**
	 * Update the completion status of a track, course, section, or lesson for the current student
	 * Cascades up to parents and clears progress caches for parents
	 * Triggers actions for completion/incompletion
	 * Inserts / updates necessary user postmeta data
	 * @param    string    $status       new status to update to [complete|incomplete]
	 * @param    int       $object_id    WP Post ID of the lesson, section, course, or track
	 * @param    string    $object_type  object type [lesson|section|course|course_track]
	 * @param    string    $trigger      String describing the reason for marking complete
	 * @return   boolean
	 * @since    3.17.0
	 * @version  3.17.0
	 */
	private function update_completion_status( $status, $object_id, $object_type, $trigger = &#39;unspecified&#39; ) {

		/**
		 * Before hook
		 * @action  before_llms_mark_complete
		 * @action  before_llms_mark_incomplete
		 */
		do_action( &#39;before_llms_mark_&#39; . $status, $this-&gt;get_id(), $object_id, $object_type, $trigger );

		// can only be marked incomplete in the following post types
		if ( in_array( $object_type, apply_filters( &#39;llms_completable_post_types&#39;, array( &#39;course&#39;, &#39;lesson&#39;, &#39;section&#39; ) ) ) ) {
			$object = llms_get_post( $object_id );
		} elseif ( &#39;course_track&#39; === $object_type ) {
			$object = get_term( $object_id, &#39;course_track&#39; );
		} else {
			return false;
		}

		// parent(s) to cascade up and check for incompletion
		// lessons -&gt; section -&gt; course -&gt; track(s)
		$parent_ids = array();
		$parent_type = false;

		// lessons are complete / incomplete automatically
		// other object types are dependent on their children&#39;s statuses
		// so the other object types need to check progress manually (bypassing cache) to see if it&#39;s complete / incomplete
		$complete = ( &#39;lesson&#39; === $object_type ) ? ( &#39;complete&#39; === $status ) : ( 100 == $this-&gt;get_progress( $object_id, $object_type, false ) );

		// get the immediate parent so we can cascade up and maybe mark the parent as incomplete as well
		switch ( $object_type ) {

			case &#39;lesson&#39;:
				$parent_ids = array( $object-&gt;get( &#39;parent_section&#39; ) );
				$parent_type = &#39;section&#39;;
			break;

			case &#39;section&#39;:
				$parent_ids = array( $object-&gt;get( &#39;parent_course&#39; ) );
				$parent_type = &#39;course&#39;;
			break;

			case &#39;course&#39;:
				$parent_ids = wp_list_pluck( $object-&gt;get_tracks(), &#39;term_id&#39; );
				$parent_type = &#39;course_track&#39;;
			break;

		}

		// reset the cached progress for any objects with children
		if ( &#39;lesson&#39; !== $object_type ) {
			$this-&gt;set( sprintf( &#39;%1$s_%2$d_progress&#39;, $object_type, $object_id ), &#39;&#39; );
		}

		// reset cache for all parents
		if ( $parent_ids &amp;&amp; $parent_type ) {

			foreach ( $parent_ids as $pid ) {

				$this-&gt;set( sprintf( &#39;%1$s_%2$d_progress&#39;, $parent_type, $pid ), &#39;&#39; );

			}
		}

		// determine if an update should be made
		$update = ( &#39;complete&#39; === $status &amp;&amp; $complete ) || ( &#39;incomplete&#39; === $status &amp;&amp; ! $complete );

		if ( $update ) {

			// insert meta data
			if ( &#39;complete&#39; === $status ) {
				$this-&gt;insert_completion_postmeta( $object_id, $trigger );
			} elseif ( &#39;incomplete&#39; === $status ) {
				$this-&gt;insert_incompletion_postmeta( $object_id, $trigger );
			}

			/**
			 * Generic hook
			 * @action  llms_mark_complete
			 * @action  llms_mark_incomplete
			 */
			do_action( &#39;llms_mark_&#39; . $status, $this-&gt;get_id(), $object_id, $object_type, $trigger );

			/**
			 * Specific hook
			 * Also backwards compatible
			 * @action  lifterlms_{$object_type}_completed
			 * @action  lifterlms_{$object_type}_incompleted
			 */
			do_action( &#39;lifterlms_&#39; . $object_type . &#39;_&#39; . $status . &#39;d&#39;, $this-&gt;get_id(), $object_id );

			// cascade up for parents
			if ( $parent_ids &amp;&amp; $parent_type ) {

				foreach ( $parent_ids as $pid ) {

					$this-&gt;update_completion_status( $status, $pid, $parent_type, $trigger );

				}
			}

			/**
			 * Generic after hook
			 * @action  after_llms_mark_complete
			 * @action  after_llms_mark_incomplete
			 */
			do_action( &#39;after_llms_mark_&#39; . $status, $this-&gt;get_id(), $object_id, $object_type, $trigger );

		}// End if().

		return $update;

	}




	/*
		       /$$                                                               /$$                     /$$
		      | $$                                                              | $$                    | $$
		  /$$$$$$$  /$$$$$$   /$$$$$$   /$$$$$$   /$$$$$$   /$$$$$$$  /$$$$$$  /$$$$$$    /$$$$$$   /$$$$$$$
		 /$$__  $$ /$$__  $$ /$$__  $$ /$$__  $$ /$$__  $$ /$$_____/ |____  $$|_  $$_/   /$$__  $$ /$$__  $$
		| $$  | $$| $$$$$$$$| $$  \ $$| $$  \__/| $$$$$$$$| $$        /$$$$$$$  | $$    | $$$$$$$$| $$  | $$
		| $$  | $$| $$_____/| $$  | $$| $$      | $$_____/| $$       /$$__  $$  | $$ /$$| $$_____/| $$  | $$
		|  $$$$$$$|  $$$$$$$| $$$$$$$/| $$      |  $$$$$$$|  $$$$$$$|  $$$$$$$  |  $$$$/|  $$$$$$$|  $$$$$$$
		 \_______/ \_______/| $$____/ |__/       \_______/ \_______/ \_______/   \___/   \_______/ \_______/
		                    | $$
		                    | $$
		                    |__/
	*/

	/**
	 * Remove Student Quiz attempts
	 * @param    int     $quiz_id    WP Post ID of a Quiz
	 * @param    int     $lesson_id  WP Post ID of a lesson
	 * @param    int     $attempt    optional attempt number, if omitted all attempts for quiz &amp; lesson will be deleted
	 * @return   array               updated array quiz data for the student
	 * @since    3.4.4
	 * @version  3.9.0
	 */
	public function delete_quiz_attempt( $quiz_id, $lesson_id, $attempt = null ) {
		llms_deprecated_function( &#39;LLMS_Student-&gt;delete_quiz_attempt()&#39;, &#39;3.9.0&#39;, &#39;LLMS_Student-&gt;quizzes()-&gt;delete_attempt()&#39; );
		return $this-&gt;quizzes()-&gt;delete_attempt( $quiz_id, $lesson_id, $attempt );
	}

	/**
	 * Get the quiz attempt with the highest grade for a given quiz and lesson combination
	 * @param    int     $quiz_id    WP Post ID of a Quiz
	 * @param    int     $lesson_id  WP Post ID of a lesson
	 * @return   array
	 * @since    3.9.0
	 * @version  3.9.0
	 */
	public function get_best_quiz_attempt( $quiz = null, $lesson = null ) {
		llms_deprecated_function( &#39;LLMS_Student-&gt;get_best_quiz_attempt()&#39;, &#39;3.9.0&#39;, &#39;LLMS_Student-&gt;quizzes()-&gt;get_best_attempt()&#39; );
		return $this-&gt;quizzes()-&gt;get_best_attempt( $quiz, $lesson );
	}

	/**
	 * Retrieve quiz data for a student for a lesson / quiz combination
	 * @param    int     $quiz    WP Post ID of a Quiz
	 * @param    int     $lesson  WP Post ID of a lesson
	 * @return   array
	 * @since    3.2.0
	 * @version  3.9.0
	 */
	public function get_quiz_data( $quiz = null, $lesson = null ) {
		llms_deprecated_function( &#39;LLMS_Student-&gt;get_quiz_data()&#39;, &#39;3.9.0&#39;, &#39;LLMS_Student-&gt;quizzes()-&gt;get_all()&#39; );
		return $this-&gt;quizzes()-&gt;get_all( $quiz, $lesson );
	}

	/**
	 * Determine if a student has access to a product&#39;s content
	 * @param      int     $product_id    WP Post ID of a course or membership
	 * @return     boolean
	 * @since      3.0.0
	 * @version    3.12.2
	 * @deprecated 3.12.2   This function previously differed from $this-&gt;is_enrolled() by
	 *                      checking the status of an order and only returning true when
	 *                      the order status and enrollment status were both true
	 *                      this causes issues when a student is expired from a limited-access product
	 *                      and is then manually re-enrolled by an admin
	 *                      there is no way to change the access expiration information
	 *                      and the enrollment status says &#34;Enrolled&#34; but the student still cannot
	 *                      access the content
	 *
	 * 						Additionally redundant due to the fact that access is expired automatically
	 * 						via action scheduler `do_action( &#39;llms_access_plan_expiration&#39;, $order_id );`
	 * 						This action changes the enrollment status thereby rendering this additional
	 * 						access check redundant, confusing, unnecessary
	 */
	public function has_access( $product_id ) {

		llms_deprecated_function( &#39;LLMS_Student::has_access()&#39;, &#39;3.12.2&#39;, &#39;LLMS_Student::is_enrolled()&#39; );
		return $this-&gt;is_enrolled( $product_id );

	}

}
</pre>
			</div>
			<p class="source-code-links">
				<span>
					<a href="#" class="show-complete-source">Expand full source code</a>
					<a href="#" class="less-complete-source">Collapse full source code</a>
				</span>
				<span><a href="https://github.com/gocodebox/lifterlms/blob/3.33.1/includes/models/model.llms.student.php#L20">View on GitHub</a></span>
			</p>
			</section>
	<hr/>
	<section class="changelog">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="changelog" tabindex="-1">Changelog <a href="#changelog" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Changelog</span></a></h3>

		<table>
			<caption class="screen-reader-text">Changelog</caption>
			<thead>
				<tr>
					<th class="changelog-version">Version</th>
					<th class="changelog-desc">Description</th>
				</tr>
			</thead>

			<tbody>
									
					<tr>
						<td><a href="https://developer.lifterlms.com/reference/since/3.33.0/" alt="WordPress 3.33.0">3.33.0</a></td>
						<td><span class="since-description">Added the <code>delete_enrollment_postmeta</code> private method that allows student&#39;s enrollment postmeta deletion.</span></td>
					</tr>
									
					<tr>
						<td><a href="https://developer.lifterlms.com/reference/since/2.2.3/" alt="WordPress 2.2.3">2.2.3</a></td>
						<td>Introduced.</td>
					</tr>
							</tbody>
		</table>
	</section>

	<hr/>
	<section class="related">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="related" tabindex="-1">Related <a href="#related" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Related</span></a></h2>

					<article class="uses">
				<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="uses" tabindex="-1">Uses <a href="#uses" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Uses</span></a></h3>
				<table id="uses-table">
					<caption class="screen-reader-text">Uses</caption>
					<thead>
						<tr>
							<th>Uses</th>
							<th class="related-desc">Description</th>
						</tr>
					</thead>
					<tbody>
												<tr>
							<td>
								<span>includes/abstracts/llms.abstract.user.data.php:</span>
								<a href="https://developer.lifterlms.com/reference/classes/llms_abstract_user_data/">LLMS_Abstract_User_Data</a>
							</td>
							<td class="related-desc">
								<p>LifterLMS User Data Abstract</p>
							</td>
						</tr>
											</tbody><tbody>
				</tbody></table>

							</article>
		
			</section>
			<hr/>
		<section class="class-methods">
			<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="methods" tabindex="-1">Methods <a href="#methods" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Methods</span></a></h2>
			<ul>
									<li><a href="add_membership_level/index.html">
							add_membership_level</a>
						&mdash; Add the student to a LifterLMS Membership											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/delete_enrollment/">
							delete_enrollment</a>
						&mdash; Delete a student enrollment.											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/delete_enrollment_postmeta/">
							delete_enrollment_postmeta</a>
						&mdash; Remove student enrollment postmeta for a given product.											</li>
									<li><a href="delete_quiz_attempt/index.html">
							delete_quiz_attempt</a>
						&mdash; Remove Student Quiz attempts											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/enroll/">
							enroll</a>
						&mdash; Enroll the student in a course or membership											</li>
									<li><a href="get_achievements/index.html">
							get_achievements</a>
						&mdash; Retrieve achievements that a user has earned											</li>
									<li><a href="get_avatar/index.html">
							get_avatar</a>
																	</li>
									<li><a href="get_best_quiz_attempt/index.html">
							get_best_quiz_attempt</a>
						&mdash; Get the quiz attempt with the highest grade for a given quiz and lesson combination											</li>
									<li><a href="get_certificates/index.html">
							get_certificates</a>
						&mdash; Retrieve certificates that a user has earned											</li>
									<li><a href="get_completed_courses/index.html">
							get_completed_courses</a>
						&mdash; Retrieve IDs of courses a user has completed											</li>
									<li><a href="get_completion_date/index.html">
							get_completion_date</a>
						&mdash; Get the formatted date when a course or lesson was completed by the student											</li>
									<li><a href="get_courses/index.html">
							get_courses</a>
						&mdash; Retrieve IDs of user&#39;s courses based on supplied criteria											</li>
									<li><a href="get_enrollment_date/index.html">
							get_enrollment_date</a>
						&mdash; Get the formatted date when a user initially enrolled in a product or when they were last updated											</li>
									<li><a href="get_enrollment_order/index.html">
							get_enrollment_order</a>
						&mdash; Retrieve the order which enrolled a student in a given course or membership Retrieves the most recently updated order for the given product											</li>
									<li><a href="get_enrollment_status/index.html">
							get_enrollment_status</a>
						&mdash; Get the current enrollment status of a student for a particular product											</li>
									<li><a href="get_enrollment_trigger/index.html">
							get_enrollment_trigger</a>
						&mdash; Get the enrollment trigger for a the student&#39;s enrollment in a course											</li>
									<li><a href="get_enrollment_trigger_id/index.html">
							get_enrollment_trigger_id</a>
						&mdash; Get the enrollment trigger id for a the student&#39;s enrollment in a course											</li>
									<li><a href="get_enrollments/index.html">
							get_enrollments</a>
						&mdash; Retrieve IDs of user&#39;s enrollments by post type (and additional criteria)											</li>
									<li><a href="get_events/index.html">
							get_events</a>
						&mdash; Retrieve postmeta events related to the student											</li>
									<li><a href="get_grade/index.html">
							get_grade</a>
						&mdash; Get the students grade for a lesson / course All grades are based on quizzes assigned to lessons											</li>
									<li><a href="get_last_completed_lesson/index.html">
							get_last_completed_lesson</a>
						&mdash; Get the students last completed lesson in a course											</li>
									<li><a href="get_membership_levels/index.html">
							get_membership_levels</a>
						&mdash; Retrieve an array of Membership Levels for a user											</li>
									<li><a href="get_memberships/index.html">
							get_memberships</a>
						&mdash; Retrieve IDs of user&#39;s memberships based on supplied criteria											</li>
									<li><a href="get_name/index.html">
							get_name</a>
						&mdash; Get the full name of a student											</li>
									<li><a href="get_next_lesson/index.html">
							get_next_lesson</a>
						&mdash; Get the next lesson a student needs to complete in a course											</li>
									<li><a href="get_notification_subscription/index.html">
							get_notification_subscription</a>
						&mdash; Retrieve a user&#39;s notification subscription preferences for a given type &amp; trigger											</li>
									<li><a href="get_orders/index.html">
							get_orders</a>
																	</li>
									<li><a href="get_overall_grade/index.html">
							get_overall_grade</a>
						&mdash; Retrieve the student&#39;s overall grade Grade = sum of grades for all courses divided by number of enrolled courses if a course has no quizzes in it, it cannot be graded and is therefore excluded from the calculation											</li>
									<li><a href="get_overall_progress/index.html">
							get_overall_progress</a>
						&mdash; Retrieve a student&#39;s overall progress Overall progress is the total percentage completed based on all courses the student is enrolled in Cached data is cleared every time the student completes a lesson											</li>
									<li><a href="get_progress/index.html">
							get_progress</a>
						&mdash; Get students progress through a course or track											</li>
									<li><a href="get_quiz_data/index.html">
							get_quiz_data</a>
						&mdash; Retrieve quiz data for a student for a lesson / quiz combination											</li>
									<li><a href="get_registration_date/index.html">
							get_registration_date</a>
						&mdash; Retrieve the Students original registration date in chosen format											</li>
									<li><a href="has_access/index.html">
							has_access</a>
						&mdash; Determine if a student has access to a product&#39;s content						&mdash; <span class="deprecated-method">deprecated</span>					</li>
									<li><a href="insert_completion_postmeta/index.html">
							insert_completion_postmeta</a>
						&mdash; Add student postmeta data for completion of a lesson, section, course or track											</li>
									<li><a href="insert_enrollment_postmeta/index.html">
							insert_enrollment_postmeta</a>
						&mdash; Add student postmeta data for enrollment into a course or membership											</li>
									<li><a href="insert_incompletion_postmeta/index.html">
							insert_incompletion_postmeta</a>
						&mdash; Add student postmeta data for incompletion of a lesson, section, course or track An &#34;_is_complete&#34; value of &#34;no&#34; is inserted into postmeta											</li>
									<li><a href="insert_status_postmeta/index.html">
							insert_status_postmeta</a>
						&mdash; Add a new status record to the user postmeta table for a specific product											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/instructor/">
							instructor</a>
						&mdash; Retrieve an instance of the LLMS_Instructor model for the current user											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/is_active/">
							is_active</a>
						&mdash; Determine if the student is active in at least one course or membership											</li>
									<li><a href="is_complete/index.html">
							is_complete</a>
						&mdash; Determine if the student has completed a course, track, or lesson											</li>
									<li><a href="is_enrolled/index.html">
							is_enrolled</a>
						&mdash; Determine if a student is enrolled in a Course or Membership.											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/is_instructor/">
							is_instructor</a>
						&mdash; Determine if the student is a LifterLMS Instructor (of any kind) Can be admin, manager, instructor, assistant											</li>
									<li><a href="mark_complete/index.html">
							mark_complete</a>
						&mdash; Mark a lesson, section, course, or track complete for the given user											</li>
									<li><a href="mark_incomplete/index.html">
							mark_incomplete</a>
						&mdash; Mark a lesson, section, course, or track incomplete for the given user Gives an &#34;_is_complete&#34; value of &#34;no&#34; for the given object											</li>
									<li><a href="quizzes/index.html">
							quizzes</a>
						&mdash; Retrieve an instance of the student quiz data model											</li>
									<li><a href="remove_membership_level/index.html">
							remove_membership_level</a>
						&mdash; Remove a student from a membership level											</li>
									<li><a href="unenroll/index.html">
							unenroll</a>
						&mdash; Remove a student from a LifterLMS course or membership											</li>
									<li><a href="https://developer.lifterlms.com/reference/classes/llms_student/update_completion_status/">
							update_completion_status</a>
						&mdash; Update the completion status of a track, course, section, or lesson for the current student Cascades up to parents and clears progress caches for parents Triggers actions for completion/incompletion Inserts / updates necessary user postmeta data											</li>
							</ul>
		</section>
		<hr/>
	<section class="user-notes">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="user-contributed-notes" tabindex="-1">User Contributed Notes <a href="#user-contributed-notes" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">User Contributed Notes</span></a></h2>
		
<div id="comments" class="comments-area">

	
	
		
			<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small></small></h3><p>You must <a href="https://developer.lifterlms.com/wp-login.php?redirect_to=https%3A%2F%2Fdeveloper.lifterlms.com%2Freference%2Fclasses%2Fllms_student%2F%23respond">log in</a> before being able to contribute a note or feedback.</p>	</div><!-- #respond -->
		
	
</div><!-- #comments -->
	</section>
</div>
	<br/><br/><br/><hr/>Permalink: <input style="width:60%;" type="text" value="https://developer.lifterlms.com/reference/classes/llms_student/"/>

</article>

			
		
		</main><!-- #main -->
	</div><!-- #primary -->
	</div><!-- #content -->

</div><!-- #page -->

	<div class="main-footer" id="llms-footer">
		<div class="wrapper">
			&copy; 2014 - 2019 <a href="https://lifterlms.com">LifterLMS</a> &middot; <a href="https://lifterlms.com/privacy-policy/">Privacy Policy</a> &middot; <a href="https://lifterlms.com/terms-conditions/">Terms and Conditions</a>
		</div>
	</div>

	<link rel="stylesheet" id="buttons-css" href="https://s29765.pcdn.co/wp-includes/css/buttons.min.css?ver=5.1.1" type="text/css" media="all"/>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/navigation.js?ver=20190314"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/skip-link-focus-fix.js?ver=20190314"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/search.js?ver=20190314"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/menu.js?ver=20190314"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/awesomplete.min.js?ver=20160322"></script>
<script type="text/javascript">
/* <![CDATA[ */
var autocomplete = {"ajaxurl":"https:\/\/developer.lifterlms.com\/wp-admin\/admin-ajax.php","nonce":"5a985f74d1"};
/* ]]> */
</script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/autocomplete.js?ver=20160524"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/function-reference.js?ver=20180724"></script>
<script type="text/javascript">
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode","strong":"Bold","strongClose":"Close bold tag","em":"Italic","emClose":"Close italic tag","link":"Insert link","blockquote":"Blockquote","blockquoteClose":"Close blockquote tag","del":"Deleted text (strikethrough)","delClose":"Close deleted text tag","ins":"Inserted text","insClose":"Close inserted text tag","image":"Insert image","ul":"Bulleted list","ulClose":"Close bulleted list tag","ol":"Numbered list","olClose":"Close numbered list tag","li":"List item","liClose":"Close list item tag","code":"Code","codeClose":"Close code tag","more":"Insert Read More tag"};
/* ]]> */
</script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-includes/js/quicktags.min.js?ver=5.1.1"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/user-notes.js?ver=20181019"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wporg_note_feedback = {"show":"Show Feedback","hide":"Hide Feedback"};
/* ]]> */
</script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/user-notes-feedback.js?ver=20181023"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/tabs.js?ver=20160824"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wporg_note_preview = {"ajaxurl":"https:\/\/developer.lifterlms.com\/wp-admin\/admin-ajax.php","nonce":"34505f0fee","preview":"preview note","preview_empty":"Nothing to preview","is_admin":""};
/* ]]> */
</script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-content/themes/wporg-developer/js/user-notes-preview.js?ver=20181019"></script>
<script type="text/javascript" src="https://s29765.pcdn.co/wp-includes/js/wp-embed.min.js?ver=5.1.1"></script>

		<script type="text/javascript">
		tinyMCEPreInit = {
			baseURL: "https://developer.lifterlms.com/wp-includes/js/tinymce",
			suffix: ".min",
						mceInit: {},
			qtInit: {'comment':{id:"comment",buttons:"strong,em,ul,ol,li"}},
			ref: {plugins:"",theme:"modern",language:""},
			load_ext: function(url,lang){var sl=tinymce.ScriptLoader;sl.markDone(url+'/langs/'+lang+'.js');sl.markDone(url+'/langs/'+lang+'_dlg.js');}
		};
		</script>
				<script type="text/javascript">
		var ajaxurl = "/wp-admin/admin-ajax.php";
		( function() {
			var init, id, $wrap;

			if ( typeof tinymce !== 'undefined' ) {
				if ( tinymce.Env.ie && tinymce.Env.ie < 11 ) {
					tinymce.$( '.wp-editor-wrap ' ).removeClass( 'tmce-active' ).addClass( 'html-active' );
					return;
				}

				for ( id in tinyMCEPreInit.mceInit ) {
					init = tinyMCEPreInit.mceInit[id];
					$wrap = tinymce.$( '#wp-' + id + '-wrap' );

					if ( ( $wrap.hasClass( 'tmce-active' ) || ! tinyMCEPreInit.qtInit.hasOwnProperty( id ) ) && ! init.wp_skip_init ) {
						tinymce.init( init );

						if ( ! window.wpActiveEditor ) {
							window.wpActiveEditor = id;
						}
					}
				}
			}

			if ( typeof quicktags !== 'undefined' ) {
				for ( id in tinyMCEPreInit.qtInit ) {
					quicktags( tinyMCEPreInit.qtInit[id] );

					if ( ! window.wpActiveEditor ) {
						window.wpActiveEditor = id;
					}
				}
			}
		}());
		</script>
			

</body></html>